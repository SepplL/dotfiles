- name: Bootstrap development environment
  hosts: localhost

  tasks:
    - name: Install packages with dnf
      become: yes
      ansible.builtin.dnf:
        name:
        - git
        - make
        - zsh
        - zig
        - neovim
        - fzf
        - eza
        - zoxide
        - stow
        - waybar
        - river
        - swaylock
        - swaybg
        - ghostty
        state: present
      when: ansible_distribution == "Fedora"
    - name: Run Stow  # to manage the dotfiles
      shell: "stow . --target {{ ansible_env.HOME }} --verbose=2"
      register: result
      changed_when: 'result.stderr is search("LINK: ")'
